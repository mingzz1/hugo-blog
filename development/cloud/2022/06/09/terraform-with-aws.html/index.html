<!DOCTYPE html>
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&display=swap"
    rel="stylesheet">

<html class="no-js">
<head>
    <meta charset="utf-8">

    <base href="https://mingzz1.github.io/">
    <title> mingzzi&#39;s blog </title>
    <meta name="description" content="mingzzi&#39;s blog">

    <link rel="canonical" href="https://mingzz1.github.io/development/cloud/2022/06/09/terraform-with-aws.html/">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />

    
    <link rel="stylesheet" href="https://mingzz1.github.io/sass/main.min.94d6e676b5b11c22f591951fd9b4e6ab0f6a3179daac45918d1fbc53ed631f00.css">

    <link rel="shortcut icon" href="https://mingzz1.github.io/img/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" type="text/css"
        href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">


    <script src="https://code.jquery.com/jquery-1.12.4.min.js"
        integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-130304424-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-130304424-1');
    </script>

    <script>
        $(function () {
            $(".cat1>li").click(function () {
                $(this).siblings().find('ul').slideUp(300);
                $(this).find('ul').slideToggle(300);
            })

            $(window).scroll(function () {
                activeBg();
            });

            activeBg();


            $('.h-menu').click(function (e) {
                e.preventDefault();
                $('.side').addClass('on');
            });

            $('.close').click(function (e) {
                e.preventDefault();
                $('.side').removeClass('on');
            });

            $('ul.slide>li').click(function () {
                if ($(this).find('.down').hasClass('on')) {
                    $(this).find('.down').removeClass('on');
                    $(this).find('.down').prev().stop().slideUp(500);
                } else {
                    $(this).find('.down').addClass('on');
                    $(this).find('.down').prev().stop().slideDown(500);
                }
            })
        })

        function activeBg() {
            if ($(window).scrollTop() > 0) {
                $('.site-header').addClass('on');
            } else {
                $('.site-header').removeClass('on');
            }
        }
    </script>
</head>
<header class="site-header">
    <h1 class="web-t" onclick="window.location.href='/'"><span>def</span><em> 천방지축 얼렁뚱땅
        </em><span>(</span><i>🤣</i><span>)</span>:<br />
        &nbsp;&nbsp;&nbsp;&nbsp;<span class="nbsp">title =</span> 빙글빙글 돌아가는 우당탕탕 시큐로그
        <br />
    </h1>

    <h1 class="mob-t" onclick="window.location.href='/'">
        <span>천/얼/빙/돌(</span><i>🤣</i><span>)</span>
        <br />우당탕탕 시큐로그
    </h1>

    <nav>
        <div class="h-menu">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <div class="side">
            <div class="close">
                <span></span>
                <span></span>
            </div>
            <ul class="slide">
                <li class="on"><a href="#">All Post</a>
                </li>
                <li><a>Pentesting</a>
                    <ul>
                        <li><a href="https://mingzz1.github.io//pentesting/ios">iOS</a></li>
                        <li><a href="https://mingzz1.github.io//pentesting/android">Android</a></li>
                        <li><a href="https://mingzz1.github.io//pentesting/web">Web</a></li>
                        <li><a href="https://mingzz1.github.io//pentesting/cloud">Cloud</a></li>
                    </ul>
                    <span class="down"></span>
                </li>
                <li><a>Wargame</a>
                    <ul>
                        <li><a href="https://mingzz1.github.io//wargame/lord-of-sql-injection">Lord of SQL Injection</a></li>
                        <li><a href="https://mingzz1.github.io//wargame/pwnable.kr">Pwnable.kr</a></li>
                        <li><a href="https://mingzz1.github.io//wargame/wargame.kr">Wargame.kr</a></li>
                        <li><a href="https://mingzz1.github.io//wargame/xss-game">XSS Game</a></li>
                        <li><a href="https://mingzz1.github.io//wargame/owasp">OWASP-MSTG Crackmes</a></li>
                    </ul>
                    <span class="down"></span>
                </li>
                <li><a>CTF</a>
                    <ul>
                        <li><a href="https://mingzz1.github.io//ctf/2018">2018</a></li>
                        <li><a href="https://mingzz1.github.io//ctf/2019">2019</a></li>
                    </ul>
                    <span class="down"></span>
                </li>
                <li><a>Error</a>
                    <ul>
                        <li><a href="https://mingzz1.github.io//error/linux">Linux</a></li>
                        <li><a href="https://mingzz1.github.io//error/windows">Windows</a></li>
                        <li><a href="https://mingzz1.github.io//error/python">Python</a></li>
                    </ul>
                    <span class="down"></span>
                </li>
                <li><a>Development</a>
                    <ul>
                        <li><a href="https://mingzz1.github.io//development/basic">Basic</a></li>
                        <li><a href="https://mingzz1.github.io//development/web">Web</a></li>
                        <li><a href="https://mingzz1.github.io//development/mobile">Mobile</a></li>
                        <li><a href="https://mingzz1.github.io//development/database">Database</a></li>
                        <li><a href="https://mingzz1.github.io//development/docker">Docker</a></li>
                        <li><a href="https://mingzz1.github.io//development/github-blog">Github Blog</a></li>
                        <li><a href="https://mingzz1.github.io//development/secure-coding">Secure Coding</a></li>
                        <li><a href="https://mingzz1.github.io//development/cloud">Cloud</a></li>
                    </ul>
                    <span class="down"></span>
                </li>
                <hr />
                <li><a href="https://mingzz1.github.io//about">About</a></li>
                <li><a href="https://mingzz1.github.io//archive">Archive</a></li>
                <li><a href="https://mingzz1.github.io//tags">Tag</a></li>
            </ul>
        </div>
    </nav>
</header>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1587587893565234"
     crossorigin="anonymous"></script>

<body>
    <div class="content">
        
        

<article>
    <header>
        <h1 class="title">[Terraform 사용기] Terraform 으로 AWS Instance 생성/수정/삭제 하기</h1>
        <p class="meta">
            2022-06-09
        </p>
    </header>
    <section class="post-content"><p>오늘은 원래 Terraform을 사용해서 <code>AWS Instance의 생성</code>만 테스트 해 보려고 했다.
근데 하다보니까 튜토리얼이 간단해서인지 금방 끝나서 생성 뿐만 아니라 수정과 삭제도 함께 테스트 해 보았다.</p>
<p>Terraform을 사용 해 AWS에서 인프라를 생성/수정/삭제 하기 위해서는 먼저 <code>AWS CLI</code>가 설치되어 있어야 한다.
<code>AWS CLI</code>는 <a href="https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html">여기</a>를 참고 해 설치할 수 있다.</p>
<h3 id="0-aws-access-key-발급">0. AWS Access Key 발급</h3>
<p>설치 후에는 CLI를 사용하기 위해 <code>Access Key</code>를 발급 받아야 한다.
<code>Access Key</code>는 오른쪽 상단 <code>ID</code> 클릭 &gt; <code>보안 자격 증명</code> 선택 &gt; 중간의 <code>액세스 키(액세스 키 ID 및 비밀 액세스 키)</code> 선택 &gt; <code>새 액세스 키 만들기</code>로 생성할 수 있다.</p>
<p><img src="/images/cloud/terraform/terraform_with_aws/terraform_with_aws_01.png" alt=""></p>
<p><img src="/images/cloud/terraform/terraform_with_aws/terraform_with_aws_02.png" alt=""></p>
<p><code>Access Key</code>를 발급 받았다면 Terraform이 설치 된 서버에서 <code>aws configure</code>을 통해 아래와 같이 등록 해 주어야 한다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ aws configure
AWS Access Key ID <span style="color:#ff79c6">[</span>None<span style="color:#ff79c6">]</span>: <span style="color:#ff79c6">[</span>AWS_ACCESS_KEY_ID<span style="color:#ff79c6">]</span>
AWS Secret Access Key <span style="color:#ff79c6">[</span>None<span style="color:#ff79c6">]</span>: <span style="color:#ff79c6">[</span>AWS_SECRET_ACCESS_KEY<span style="color:#ff79c6">]</span>
Default region name <span style="color:#ff79c6">[</span>None<span style="color:#ff79c6">]</span>: 
Default output format <span style="color:#ff79c6">[</span>None<span style="color:#ff79c6">]</span>:
</code></pre></td></tr></table>
</div>
</div><h3 id="1-aws-instance-생성">1. AWS Instance 생성</h3>
<p>이제 AWS를 사용하기 위한 사전 준비는 모두 끝이 났다.
첫 번째 튜토리얼과 같이 새로운 폴더를 하나 생성하여 아래와 같이 <code>main.tf</code>를 작성한다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># main.tf</span>
terraform <span style="color:#ff79c6">{</span>
  required_providers <span style="color:#ff79c6">{</span>
    <span style="color:#8be9fd;font-style:italic">aws</span> <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">{</span>
      <span style="color:#8be9fd;font-style:italic">source</span>  <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;hashicorp/aws&#34;</span>
      <span style="color:#8be9fd;font-style:italic">version</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;~&gt; 4.16&#34;</span>
    <span style="color:#ff79c6">}</span>
  <span style="color:#ff79c6">}</span>

  <span style="color:#8be9fd;font-style:italic">required_version</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;&gt;= 1.2.0&#34;</span>
<span style="color:#ff79c6">}</span>

provider <span style="color:#f1fa8c">&#34;aws&#34;</span> <span style="color:#ff79c6">{</span>
  <span style="color:#8be9fd;font-style:italic">region</span>  <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;us-west-2&#34;</span>
<span style="color:#ff79c6">}</span>

resource <span style="color:#f1fa8c">&#34;aws_instance&#34;</span> <span style="color:#f1fa8c">&#34;app_server&#34;</span> <span style="color:#ff79c6">{</span>
  <span style="color:#8be9fd;font-style:italic">ami</span>           <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;ami-830c94e3&#34;</span>
  <span style="color:#8be9fd;font-style:italic">instance_type</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;t2.micro&#34;</span>

  <span style="color:#8be9fd;font-style:italic">tags</span> <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">{</span>
    <span style="color:#8be9fd;font-style:italic">Name</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;ExampleAppServerInstance&#34;</span>
  <span style="color:#ff79c6">}</span>
<span style="color:#ff79c6">}</span>
</code></pre></td></tr></table>
</div>
</div><p>각 파트의 설명은 아래와 같다.</p>
<blockquote>
<p>Teraform Block</p>
<ul>
<li>Terraform이 인프라를 프로비저닝 할 때 사용할 필수 provider 등의 설정</li>
<li>각 provider에 대하여 호스트명, 네임스페이스, provider 유형 정의 가능</li>
<li>Terraform registry에서 provider를 설치 함 (<a href="https://registry.terraform.io/">https://registry.terraform.io/</a>)</li>
<li>위 예제의 경우 provider의 소스는 registry.terraform.io/hashicorp/aws 의 약자인 hashcorp/aws로 정의</li>
<li>required_providers 에서 특정 버전 선택 가능 (Optional이며, 선택하지 않을 경우 가장 최신 버전으로 설치)</li>
</ul>
</blockquote>
<blockquote>
<p>Providers Block</p>
<ul>
<li>특정 provider를 설정 (위 예제의 경우 aws)</li>
<li>provider는 Terraform이 리소스를 생성하고 관리하는 데 사용하는 플러그인</li>
<li>각각 다른 provider의 리소를 관리하기 위해 여러 개의 provider block을 사용 할 수도 있으며, 서로 다른 provider를 함께 사용하는 것도 가능</li>
</ul>
</blockquote>
<blockquote>
<p>Resources Block</p>
<ul>
<li>인프라의 구성 요소 정의</li>
<li>Resource는 EC2 Instance와 같이 물리적 혹은 가상의 구성 요소일 수 있으며, Heroku 애플리케이션과 같이 논리적 리소스일 수도 있음</li>
<li>Resource Block에는 리소스의 타입(위 예제의 경우 aws_instance)과 리소스 이름(위 예제의 경우 app_server), 2 개의 문자열이 들어 감</li>
<li>리소스 타입의 prefix는 provider와 매핑</li>
<li>리소스 타입과 리소스 이름을 조합하여 해당 리소스의 Unique ID로 사용 (위 예제의 경우 ID는 aws_instance.app_server)</li>
<li>Resources Block에는 리소스를 설정하기 위한 매개변수 들이 포함(머신의 크기, 디스크 이름 이미지 등)</li>
<li>위 예제의 경우 매개변수로 AMI ID와 인스턴스 타입을 지정</li>
</ul>
</blockquote>
<p>새로운 설정을 생성했을 경우 <code>terraform init</code>을 통해 <code>configuration directory를 initializing</code>을 해야 한다.
<code>initializing</code>을 할 경우 설정 내 정의 된 provider를 다운받아 설치하게 된다.
위 예제의 경우 <code>aws</code>를 다운 및 설치한다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ terraform init

Initializing the backend...

Initializing provider plugins...
- Finding hashicorp/aws versions matching <span style="color:#f1fa8c">&#34;~&gt; 4.16&#34;</span>...
- Installing hashicorp/aws v4.17.1...
- Installed hashicorp/aws v4.17.1 <span style="color:#ff79c6">(</span>signed by HashiCorp<span style="color:#ff79c6">)</span>

Terraform has created a lock file .terraform.lock.hcl to record the provider
selections it made above. Include this file in your version control repository
so that Terraform can guarantee to make the same selections by default when
you run <span style="color:#f1fa8c">&#34;terraform init&#34;</span> in the future.

Terraform has been successfully initialized!

You may now begin working with Terraform. Try running <span style="color:#f1fa8c">&#34;terraform plan&#34;</span> to see
any changes that are required <span style="color:#ff79c6">for</span> your infrastructure. All Terraform commands
should now work.

If you ever <span style="color:#8be9fd;font-style:italic">set</span> or change modules or backend configuration <span style="color:#ff79c6">for</span> Terraform,
rerun this <span style="color:#8be9fd;font-style:italic">command</span> to reinitialize your working directory. If you forget, other
commands will detect it and remind you to <span style="color:#ff79c6">do</span> so <span style="color:#ff79c6">if</span> necessary.
</code></pre></td></tr></table>
</div>
</div><p>위 결과 중 3번째 줄을 보면 <code>Initializing provider plugins...</code>라는 부분이 있는데, 해당 부분에서 내가 <code>main.tf</code>에 정의 한 버전인 <code>4.16</code> 이상 버전을 찾는 것을 확인 할 수 있다.
그 결과 <code>aws 4.17.1</code>을 설치 완료했다.
이제 <code>terraform apply</code> 명령어를 실행하면 아래와 같이 terraform에서 내 AWS 계정에 EC2 Instance를 생성한다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">108
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">109
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">110
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">111
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">112
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">113
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">114
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">115
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">116
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">117
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">118
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">119
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">120
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">121
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">122
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">123
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">124
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">125
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">126
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">127
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">128
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">129
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">130
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">131
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">132
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">133
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">134
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">135
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">136
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">137
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ terraform apply

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  <span style="color:#6272a4"># aws_instance.app_server will be created</span>
  + resource <span style="color:#f1fa8c">&#34;aws_instance&#34;</span> <span style="color:#f1fa8c">&#34;app_server&#34;</span> <span style="color:#ff79c6">{</span>
      + <span style="color:#8be9fd;font-style:italic">ami</span>                                  <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;ami-830c94e3&#34;</span>
      + <span style="color:#8be9fd;font-style:italic">arn</span>                                  <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">associate_public_ip_address</span>          <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">availability_zone</span>                    <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">cpu_core_count</span>                       <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">cpu_threads_per_core</span>                 <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">disable_api_termination</span>              <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">ebs_optimized</span>                        <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">get_password_data</span>                    <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">false</span>
      + <span style="color:#8be9fd;font-style:italic">host_id</span>                              <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">id</span>                                   <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">instance_initiated_shutdown_behavior</span> <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">instance_state</span>                       <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">instance_type</span>                        <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;t2.micro&#34;</span>
      + <span style="color:#8be9fd;font-style:italic">ipv6_address_count</span>                   <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">ipv6_addresses</span>                       <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">key_name</span>                             <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">monitoring</span>                           <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">outpost_arn</span>                          <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">password_data</span>                        <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">placement_group</span>                      <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">placement_partition_number</span>           <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">primary_network_interface_id</span>         <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">private_dns</span>                          <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">private_ip</span>                           <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">public_dns</span>                           <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">public_ip</span>                            <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">secondary_private_ips</span>                <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">security_groups</span>                      <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">source_dest_check</span>                    <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">true</span>
      + <span style="color:#8be9fd;font-style:italic">subnet_id</span>                            <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">tags</span>                                 <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">{</span>
          + <span style="color:#f1fa8c">&#34;Name&#34;</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;ExampleAppServerInstance&#34;</span>
        <span style="color:#ff79c6">}</span>
      + <span style="color:#8be9fd;font-style:italic">tags_all</span>                             <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">{</span>
          + <span style="color:#f1fa8c">&#34;Name&#34;</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;ExampleAppServerInstance&#34;</span>
        <span style="color:#ff79c6">}</span>
      + <span style="color:#8be9fd;font-style:italic">tenancy</span>                              <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">user_data</span>                            <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">user_data_base64</span>                     <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">user_data_replace_on_change</span>          <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">false</span>
      + <span style="color:#8be9fd;font-style:italic">vpc_security_group_ids</span>               <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>

      + capacity_reservation_specification <span style="color:#ff79c6">{</span>
          + <span style="color:#8be9fd;font-style:italic">capacity_reservation_preference</span> <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>

          + capacity_reservation_target <span style="color:#ff79c6">{</span>
              + <span style="color:#8be9fd;font-style:italic">capacity_reservation_id</span>                 <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
              + <span style="color:#8be9fd;font-style:italic">capacity_reservation_resource_group_arn</span> <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
            <span style="color:#ff79c6">}</span>
        <span style="color:#ff79c6">}</span>

      + ebs_block_device <span style="color:#ff79c6">{</span>
          + <span style="color:#8be9fd;font-style:italic">delete_on_termination</span> <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">device_name</span>           <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">encrypted</span>             <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">iops</span>                  <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">kms_key_id</span>            <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">snapshot_id</span>           <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">tags</span>                  <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">throughput</span>            <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">volume_id</span>             <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">volume_size</span>           <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">volume_type</span>           <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">}</span>

      + enclave_options <span style="color:#ff79c6">{</span>
          + <span style="color:#8be9fd;font-style:italic">enabled</span> <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">}</span>

      + ephemeral_block_device <span style="color:#ff79c6">{</span>
          + <span style="color:#8be9fd;font-style:italic">device_name</span>  <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">no_device</span>    <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">virtual_name</span> <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">}</span>

      + maintenance_options <span style="color:#ff79c6">{</span>
          + <span style="color:#8be9fd;font-style:italic">auto_recovery</span> <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">}</span>

      + metadata_options <span style="color:#ff79c6">{</span>
          + <span style="color:#8be9fd;font-style:italic">http_endpoint</span>               <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">http_put_response_hop_limit</span> <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">http_tokens</span>                 <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">instance_metadata_tags</span>      <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">}</span>

      + network_interface <span style="color:#ff79c6">{</span>
          + <span style="color:#8be9fd;font-style:italic">delete_on_termination</span> <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">device_index</span>          <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">network_card_index</span>    <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">network_interface_id</span>  <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">}</span>

      + root_block_device <span style="color:#ff79c6">{</span>
          + <span style="color:#8be9fd;font-style:italic">delete_on_termination</span> <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">device_name</span>           <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">encrypted</span>             <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">iops</span>                  <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">kms_key_id</span>            <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">tags</span>                  <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">throughput</span>            <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">volume_id</span>             <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">volume_size</span>           <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">volume_type</span>           <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">}</span>
    <span style="color:#ff79c6">}</span>

Plan: <span style="color:#bd93f9">1</span> to add, <span style="color:#bd93f9">0</span> to change, <span style="color:#bd93f9">0</span> to destroy.

Do you want to perform these actions?
  Terraform will perform the actions described above.
  Only <span style="color:#f1fa8c">&#39;yes&#39;</span> will be accepted to approve.

  Enter a value: yes

aws_instance.app_server: Creating...
aws_instance.app_server: Still creating... <span style="color:#ff79c6">[</span>10s elapsed<span style="color:#ff79c6">]</span>
aws_instance.app_server: Still creating... <span style="color:#ff79c6">[</span>20s elapsed<span style="color:#ff79c6">]</span>
aws_instance.app_server: Still creating... <span style="color:#ff79c6">[</span>30s elapsed<span style="color:#ff79c6">]</span>
aws_instance.app_server: Still creating... <span style="color:#ff79c6">[</span>40s elapsed<span style="color:#ff79c6">]</span>
aws_instance.app_server: Still creating... <span style="color:#ff79c6">[</span>50s elapsed<span style="color:#ff79c6">]</span>
aws_instance.app_server: Still creating... <span style="color:#ff79c6">[</span>1m0s elapsed<span style="color:#ff79c6">]</span>
aws_instance.app_server: Still creating... <span style="color:#ff79c6">[</span>1m10s elapsed<span style="color:#ff79c6">]</span>
aws_instance.app_server: Still creating... <span style="color:#ff79c6">[</span>1m20s elapsed<span style="color:#ff79c6">]</span>
aws_instance.app_server: Creation <span style="color:#8be9fd;font-style:italic">complete</span> after 1m25s <span style="color:#ff79c6">[</span><span style="color:#8be9fd;font-style:italic">id</span><span style="color:#ff79c6">=</span>i-xxxxxxxx<span style="color:#ff79c6">]</span>

Apply complete! Resources: <span style="color:#bd93f9">1</span> added, <span style="color:#bd93f9">0</span> changed, <span style="color:#bd93f9">0</span> destroyed.
</code></pre></td></tr></table>
</div>
</div><p><code>+ resource &quot;aws_instance&quot; &quot;app_server&quot;</code>는 <code>&quot;aws_instance&quot; &quot;app_server&quot;</code> 리소스를 <code>추가(+)</code> 하겠다는 의미이며 그 아래에 생성 할 리소스의 정보를 확인할 수 있다.
<code>(known after apply)</code>는 리소스가 생성 될 때까지 알 수 없다는 의미이다.
<code>Plan: 1 to add, 0 to change, 0 to destroy.</code> 부분에서 <code>apply</code>의 결과 어떤 변화가 나타날 지 확인할 수 있고, <code>Enter a value: </code> 옆에 <code>yes</code>를 입력 해 주면 액션을 실행한다.
액션 실행 결과는 마지막 줄의 <code>Apply complete! Resources: 1 added, 0 changed, 0 destroyed.</code>로 확인할 수 있다.</p>
<p>실행 후 AWS 콘솔에 들어 가 보면 아래와 같이 인스턴스가 정상적으로 생성 된 것을 확인할 수 있다.</p>
<p><img src="/images/cloud/terraform/terraform_with_aws/terraform_with_aws_03.png" alt=""></p>
<h3 id="2-aws-instance-수정">2. AWS Instance 수정</h3>
<p>인스턴스 생성 후 여러 이유로 인스턴스를 변경해야 할 일이 있을 수 있다.
이번에는 생성 한 인스턴스를 수정하는 방법을 확인 해 보려 한다.</p>
<p>앞서 작성 한 <code>main.tf</code>에서 <code>ami</code> 부분을 아래와 같이 수정한다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"> resource <span style="color:#f1fa8c">&#34;aws_instance&#34;</span> <span style="color:#f1fa8c">&#34;app_server&#34;</span> <span style="color:#ff79c6">{</span>
-  <span style="color:#8be9fd;font-style:italic">ami</span>           <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;ami-830c94e3&#34;</span>
+  <span style="color:#8be9fd;font-style:italic">ami</span>           <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;ami-08d70e59c07c61a3a&#34;</span>
   <span style="color:#8be9fd;font-style:italic">instance_type</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;t2.micro&#34;</span>
 <span style="color:#ff79c6">}</span>
</code></pre></td></tr></table>
</div>
</div><p><code>AMI(Amazon Machine Image)</code>는 쉽게 말해 인스턴스 템플릿이다.
OS, Application Server, Application 등이 미리 정의되어 있으며, 내가 필요 한 AMI를 활용하여 인스턴스를 생성할 수 있다.
AMI의 정보는 <code>EC2</code> &gt; <code>AMI</code> &gt; <code>퍼블릭 이미지</code> 선택하여 확인할 수 있고, <code>검색</code> 창에서 여러 필터를 활용 해 내가 원하는 <code>AMI</code>를 찾아 <code>AMI ID</code>를 찾을 수 있다.
또한 <code>AMI ID</code>의 경우 각 지역 별로 다르기 때문에 내가 사용 할 지역을 선택 후 검색해야 한다.</p>
<p><img src="/images/cloud/terraform/terraform_with_aws/terraform_with_aws_04.png" alt=""></p>
<p>어쨌든 예제에서는 기본에 사용하던 OS를 변경하기 위해 <code>main.tf</code>의 <code>ami</code>를 변경했다.
변경 후 <code>terraform apply</code>를 할 경우 아래와 같다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">108
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">109
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">110
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">111
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">112
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">113
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">114
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">115
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">116
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">117
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">118
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">119
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">120
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">121
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">122
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">123
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">124
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">125
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">126
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">127
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">128
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">129
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">130
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">131
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">132
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">133
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">134
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">135
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">136
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">137
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">138
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">139
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">140
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">141
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">142
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ terraform apply
aws_instance.app_server: Refreshing state... <span style="color:#ff79c6">[</span><span style="color:#8be9fd;font-style:italic">id</span><span style="color:#ff79c6">=</span>i-036a288468ccba238<span style="color:#ff79c6">]</span>

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
-/+ destroy and <span style="color:#ff79c6">then</span> create replacement

Terraform will perform the following actions:

  <span style="color:#6272a4"># aws_instance.app_server must be replaced</span>
-/+ resource <span style="color:#f1fa8c">&#34;aws_instance&#34;</span> <span style="color:#f1fa8c">&#34;app_server&#34;</span> <span style="color:#ff79c6">{</span>
      ~ <span style="color:#8be9fd;font-style:italic">ami</span>                                  <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;ami-830c94e3&#34;</span> -&gt; <span style="color:#f1fa8c">&#34;ami-08d70e59c07c61a3a&#34;</span> <span style="color:#6272a4"># forces replacement</span>
      ~ <span style="color:#8be9fd;font-style:italic">arn</span>                                  <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;arn:aws:ec2:us-west-2:836940557029:instance/i-xxxxxxxx&#34;</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      ~ <span style="color:#8be9fd;font-style:italic">associate_public_ip_address</span>          <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">true</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      ~ <span style="color:#8be9fd;font-style:italic">availability_zone</span>                    <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;us-west-2c&#34;</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      ~ <span style="color:#8be9fd;font-style:italic">cpu_core_count</span>                       <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      ~ <span style="color:#8be9fd;font-style:italic">cpu_threads_per_core</span>                 <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      ~ <span style="color:#8be9fd;font-style:italic">disable_api_termination</span>              <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">false</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      ~ <span style="color:#8be9fd;font-style:italic">ebs_optimized</span>                        <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">false</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      - <span style="color:#8be9fd;font-style:italic">hibernation</span>                          <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">false</span> -&gt; null
      + <span style="color:#8be9fd;font-style:italic">host_id</span>                              <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      ~ <span style="color:#8be9fd;font-style:italic">id</span>                                   <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;i-xxxxxxxx&#34;</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      ~ <span style="color:#8be9fd;font-style:italic">instance_initiated_shutdown_behavior</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;stop&#34;</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      ~ <span style="color:#8be9fd;font-style:italic">instance_state</span>                       <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;running&#34;</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      ~ <span style="color:#8be9fd;font-style:italic">ipv6_address_count</span>                   <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      ~ <span style="color:#8be9fd;font-style:italic">ipv6_addresses</span>                       <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">[]</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">key_name</span>                             <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      ~ <span style="color:#8be9fd;font-style:italic">monitoring</span>                           <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">false</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">outpost_arn</span>                          <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">password_data</span>                        <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">placement_group</span>                      <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">placement_partition_number</span>           <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      ~ <span style="color:#8be9fd;font-style:italic">primary_network_interface_id</span>         <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;eni-xxxxxxxx&#34;</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      ~ <span style="color:#8be9fd;font-style:italic">private_dns</span>                          <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;ip-172-31-6-166.us-west-2.compute.internal&#34;</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      ~ <span style="color:#8be9fd;font-style:italic">private_ip</span>                           <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;172.31.6.166&#34;</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      ~ <span style="color:#8be9fd;font-style:italic">public_dns</span>                           <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;ec2-34-219-42-204.us-west-2.compute.amazonaws.com&#34;</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      ~ <span style="color:#8be9fd;font-style:italic">public_ip</span>                            <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;34.219.42.204&#34;</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      ~ <span style="color:#8be9fd;font-style:italic">secondary_private_ips</span>                <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">[]</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      ~ <span style="color:#8be9fd;font-style:italic">security_groups</span>                      <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">[</span>
          - <span style="color:#f1fa8c">&#34;default&#34;</span>,
        <span style="color:#ff79c6">]</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      ~ <span style="color:#8be9fd;font-style:italic">subnet_id</span>                            <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;subnet-xxxxxxxx&#34;</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
        <span style="color:#8be9fd;font-style:italic">tags</span>                                 <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">{</span>
            <span style="color:#f1fa8c">&#34;Name&#34;</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;ExampleAppServerInstance&#34;</span>
        <span style="color:#ff79c6">}</span>
      ~ <span style="color:#8be9fd;font-style:italic">tenancy</span>                              <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;default&#34;</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">user_data</span>                            <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      + <span style="color:#8be9fd;font-style:italic">user_data_base64</span>                     <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
      ~ <span style="color:#8be9fd;font-style:italic">vpc_security_group_ids</span>               <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">[</span>
          - <span style="color:#f1fa8c">&#34;sg-xxxxxxxx&#34;</span>,
        <span style="color:#ff79c6">]</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
        <span style="color:#6272a4"># (5 unchanged attributes hidden)</span>

      ~ capacity_reservation_specification <span style="color:#ff79c6">{</span>
          ~ <span style="color:#8be9fd;font-style:italic">capacity_reservation_preference</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;open&#34;</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>

          + capacity_reservation_target <span style="color:#ff79c6">{</span>
              + <span style="color:#8be9fd;font-style:italic">capacity_reservation_id</span>                 <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
              + <span style="color:#8be9fd;font-style:italic">capacity_reservation_resource_group_arn</span> <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
            <span style="color:#ff79c6">}</span>
        <span style="color:#ff79c6">}</span>

      - credit_specification <span style="color:#ff79c6">{</span>
          - <span style="color:#8be9fd;font-style:italic">cpu_credits</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;standard&#34;</span> -&gt; null
        <span style="color:#ff79c6">}</span>

      + ebs_block_device <span style="color:#ff79c6">{</span>
          + <span style="color:#8be9fd;font-style:italic">delete_on_termination</span> <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">device_name</span>           <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">encrypted</span>             <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">iops</span>                  <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">kms_key_id</span>            <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">snapshot_id</span>           <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">tags</span>                  <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">throughput</span>            <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">volume_id</span>             <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">volume_size</span>           <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">volume_type</span>           <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">}</span>

      ~ enclave_options <span style="color:#ff79c6">{</span>
          ~ <span style="color:#8be9fd;font-style:italic">enabled</span> <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">false</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">}</span>

      + ephemeral_block_device <span style="color:#ff79c6">{</span>
          + <span style="color:#8be9fd;font-style:italic">device_name</span>  <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">no_device</span>    <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">virtual_name</span> <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">}</span>

      ~ maintenance_options <span style="color:#ff79c6">{</span>
          ~ <span style="color:#8be9fd;font-style:italic">auto_recovery</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;default&#34;</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">}</span>

      ~ metadata_options <span style="color:#ff79c6">{</span>
          ~ <span style="color:#8be9fd;font-style:italic">http_endpoint</span>               <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;enabled&#34;</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          ~ <span style="color:#8be9fd;font-style:italic">http_put_response_hop_limit</span> <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          ~ <span style="color:#8be9fd;font-style:italic">http_tokens</span>                 <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;optional&#34;</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          ~ <span style="color:#8be9fd;font-style:italic">instance_metadata_tags</span>      <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;disabled&#34;</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">}</span>

      + network_interface <span style="color:#ff79c6">{</span>
          + <span style="color:#8be9fd;font-style:italic">delete_on_termination</span> <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">device_index</span>          <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">network_card_index</span>    <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">network_interface_id</span>  <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">}</span>

      ~ root_block_device <span style="color:#ff79c6">{</span>
          ~ <span style="color:#8be9fd;font-style:italic">delete_on_termination</span> <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">true</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          ~ <span style="color:#8be9fd;font-style:italic">device_name</span>           <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;/dev/sda1&#34;</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          ~ <span style="color:#8be9fd;font-style:italic">encrypted</span>             <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">false</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          ~ <span style="color:#8be9fd;font-style:italic">iops</span>                  <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          + <span style="color:#8be9fd;font-style:italic">kms_key_id</span>            <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          ~ <span style="color:#8be9fd;font-style:italic">tags</span>                  <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">{}</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          ~ <span style="color:#8be9fd;font-style:italic">throughput</span>            <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          ~ <span style="color:#8be9fd;font-style:italic">volume_id</span>             <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;vol-xxxxxxxx&#34;</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          ~ <span style="color:#8be9fd;font-style:italic">volume_size</span>           <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">8</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
          ~ <span style="color:#8be9fd;font-style:italic">volume_type</span>           <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;standard&#34;</span> -&gt; <span style="color:#ff79c6">(</span>known after apply<span style="color:#ff79c6">)</span>
        <span style="color:#ff79c6">}</span>
    <span style="color:#ff79c6">}</span>

Plan: <span style="color:#bd93f9">1</span> to add, <span style="color:#bd93f9">0</span> to change, <span style="color:#bd93f9">1</span> to destroy.

Do you want to perform these actions?
  Terraform will perform the actions described above.
  Only <span style="color:#f1fa8c">&#39;yes&#39;</span> will be accepted to approve.

  Enter a value: yes

aws_instance.app_server: Destroying... <span style="color:#ff79c6">[</span><span style="color:#8be9fd;font-style:italic">id</span><span style="color:#ff79c6">=</span>i-XXXXXXXX<span style="color:#ff79c6">]</span>
aws_instance.app_server: Still destroying... <span style="color:#ff79c6">[</span><span style="color:#8be9fd;font-style:italic">id</span><span style="color:#ff79c6">=</span>i-XXXXXXXX, 10s elapsed<span style="color:#ff79c6">]</span>
aws_instance.app_server: Still destroying... <span style="color:#ff79c6">[</span><span style="color:#8be9fd;font-style:italic">id</span><span style="color:#ff79c6">=</span>i-XXXXXXXX, 20s elapsed<span style="color:#ff79c6">]</span>
aws_instance.app_server: Still destroying... <span style="color:#ff79c6">[</span><span style="color:#8be9fd;font-style:italic">id</span><span style="color:#ff79c6">=</span>i-XXXXXXXX, 30s elapsed<span style="color:#ff79c6">]</span>
aws_instance.app_server: Destruction <span style="color:#8be9fd;font-style:italic">complete</span> after 31s
aws_instance.app_server: Creating...
aws_instance.app_server: Still creating... <span style="color:#ff79c6">[</span>10s elapsed<span style="color:#ff79c6">]</span>
aws_instance.app_server: Still creating... <span style="color:#ff79c6">[</span>20s elapsed<span style="color:#ff79c6">]</span>
aws_instance.app_server: Still creating... <span style="color:#ff79c6">[</span>30s elapsed<span style="color:#ff79c6">]</span>
aws_instance.app_server: Still creating... <span style="color:#ff79c6">[</span>40s elapsed<span style="color:#ff79c6">]</span>
aws_instance.app_server: Creation <span style="color:#8be9fd;font-style:italic">complete</span> after 44s <span style="color:#ff79c6">[</span><span style="color:#8be9fd;font-style:italic">id</span><span style="color:#ff79c6">=</span>i-XXXXXXXX<span style="color:#ff79c6">]</span>

Apply complete! Resources: <span style="color:#bd93f9">1</span> added, <span style="color:#bd93f9">0</span> changed, <span style="color:#bd93f9">1</span> destroyed.
</code></pre></td></tr></table>
</div>
</div><p><code>-/+ resource &quot;aws_instance&quot; &quot;app_server&quot;</code> 부분은 리소스의 추가 및 삭제를 의미하며, 블록 안에서 생성 될 리소스의 정보 및 변경사항을 확인할 수 있다.
<code>Plan: 1 to add, 0 to change, 1 to destroy.</code> 에서 어떤 결과가 나타날 지 확인할 수 있는데, 위 예제의 경우 인스턴스의 OS를 변경하는 작업이기 때문에 기존 인스턴스를 삭제 후 새로 생성하는 작업을 하게 될 예정이다.
검토가 끝났다면 <code>Enter a value:</code> 옆에 <code>yes</code>를 입력하여 작업을 실행할 수 있다.
그 결과 하단에서 기존 인스턴스 삭제 후 새로운 인스턴스를 생성하는 작업을 완료 한 것을 확인할 수 있다.</p>
<p>AWS 콘솔에서 확인 결과 아래와 같이 기존 인스턴스 종료 후 새로운 인스턴스가 생성 된 것을 알 수 있다.</p>
<p><img src="/images/cloud/terraform/terraform_with_aws/terraform_with_aws_05.png" alt=""></p>
<h3 id="3-aws-instance-삭제">3. AWS Instance 삭제</h3>
<p>마지막으로 사용완료 한 인스턴스를 삭제하는 방법이다.
<code>terraform destroy</code>를 사용 할 건데, 이 명령어는 내 terraform 프로젝트 안의 모든 리소스를 삭제하는 명령어로 <code>terraform apply</code>의 반대 역할을 한다.
현재 terraform 프로젝트에 없는 리소스는 삭제 하지 않는다.</p>
<p>사용법은 단순하게 <code>terraform destroy</code>를 입력하면 된다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ terraform destroy
aws_instance.app_server: Refreshing state... <span style="color:#ff79c6">[</span><span style="color:#8be9fd;font-style:italic">id</span><span style="color:#ff79c6">=</span>i-xxxxxxxx<span style="color:#ff79c6">]</span>

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  - destroy

Terraform will perform the following actions:

  <span style="color:#6272a4"># aws_instance.app_server will be destroyed</span>
  - resource <span style="color:#f1fa8c">&#34;aws_instance&#34;</span> <span style="color:#f1fa8c">&#34;app_server&#34;</span> <span style="color:#ff79c6">{</span>
      - <span style="color:#8be9fd;font-style:italic">ami</span>                                  <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;ami-08d70e59c07c61a3a&#34;</span> -&gt; null
      - <span style="color:#8be9fd;font-style:italic">arn</span>                                  <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;arn:aws:ec2:us-west-2:836940557029:instance/i-xxxxxxxx&#34;</span> -&gt; null
      - <span style="color:#8be9fd;font-style:italic">associate_public_ip_address</span>          <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">true</span> -&gt; null
      - <span style="color:#8be9fd;font-style:italic">availability_zone</span>                    <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;us-west-2c&#34;</span> -&gt; null
      - <span style="color:#8be9fd;font-style:italic">cpu_core_count</span>                       <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span> -&gt; null
      - <span style="color:#8be9fd;font-style:italic">cpu_threads_per_core</span>                 <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span> -&gt; null
      - <span style="color:#8be9fd;font-style:italic">disable_api_termination</span>              <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">false</span> -&gt; null
      - <span style="color:#8be9fd;font-style:italic">ebs_optimized</span>                        <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">false</span> -&gt; null
      - <span style="color:#8be9fd;font-style:italic">get_password_data</span>                    <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">false</span> -&gt; null
      - <span style="color:#8be9fd;font-style:italic">hibernation</span>                          <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">false</span> -&gt; null
      - <span style="color:#8be9fd;font-style:italic">id</span>                                   <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;i-xxxxxxxx&#34;</span> -&gt; null
      - <span style="color:#8be9fd;font-style:italic">instance_initiated_shutdown_behavior</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;stop&#34;</span> -&gt; null
      - <span style="color:#8be9fd;font-style:italic">instance_state</span>                       <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;running&#34;</span> -&gt; null
      - <span style="color:#8be9fd;font-style:italic">instance_type</span>                        <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;t2.micro&#34;</span> -&gt; null
      - <span style="color:#8be9fd;font-style:italic">ipv6_address_count</span>                   <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span> -&gt; null
      - <span style="color:#8be9fd;font-style:italic">ipv6_addresses</span>                       <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">[]</span> -&gt; null
      - <span style="color:#8be9fd;font-style:italic">monitoring</span>                           <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">false</span> -&gt; null
      - <span style="color:#8be9fd;font-style:italic">primary_network_interface_id</span>         <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;eni-xxxxxxxx&#34;</span> -&gt; null
      - <span style="color:#8be9fd;font-style:italic">private_dns</span>                          <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;ip-172-31-14-53.us-west-2.compute.internal&#34;</span> -&gt; null
      - <span style="color:#8be9fd;font-style:italic">private_ip</span>                           <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;172.31.14.53&#34;</span> -&gt; null
      - <span style="color:#8be9fd;font-style:italic">public_dns</span>                           <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;ec2-52-12-153-104.us-west-2.compute.amazonaws.com&#34;</span> -&gt; null
      - <span style="color:#8be9fd;font-style:italic">public_ip</span>                            <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;52.12.153.104&#34;</span> -&gt; null
      - <span style="color:#8be9fd;font-style:italic">secondary_private_ips</span>                <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">[]</span> -&gt; null
      - <span style="color:#8be9fd;font-style:italic">security_groups</span>                      <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">[</span>
          - <span style="color:#f1fa8c">&#34;default&#34;</span>,
        <span style="color:#ff79c6">]</span> -&gt; null
      - <span style="color:#8be9fd;font-style:italic">source_dest_check</span>                    <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">true</span> -&gt; null
      - <span style="color:#8be9fd;font-style:italic">subnet_id</span>                            <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;subnet-xxxxxxxx&#34;</span> -&gt; null
      - <span style="color:#8be9fd;font-style:italic">tags</span>                                 <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">{</span>
          - <span style="color:#f1fa8c">&#34;Name&#34;</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;ExampleAppServerInstance&#34;</span>
        <span style="color:#ff79c6">}</span> -&gt; null
      - <span style="color:#8be9fd;font-style:italic">tags_all</span>                             <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">{</span>
          - <span style="color:#f1fa8c">&#34;Name&#34;</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;ExampleAppServerInstance&#34;</span>
        <span style="color:#ff79c6">}</span> -&gt; null
      - <span style="color:#8be9fd;font-style:italic">tenancy</span>                              <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;default&#34;</span> -&gt; null
      - <span style="color:#8be9fd;font-style:italic">user_data_replace_on_change</span>          <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">false</span> -&gt; null
      - <span style="color:#8be9fd;font-style:italic">vpc_security_group_ids</span>               <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">[</span>
          - <span style="color:#f1fa8c">&#34;sg-xxxxxxxx&#34;</span>,
        <span style="color:#ff79c6">]</span> -&gt; null

      - capacity_reservation_specification <span style="color:#ff79c6">{</span>
          - <span style="color:#8be9fd;font-style:italic">capacity_reservation_preference</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;open&#34;</span> -&gt; null
        <span style="color:#ff79c6">}</span>

      - credit_specification <span style="color:#ff79c6">{</span>
          - <span style="color:#8be9fd;font-style:italic">cpu_credits</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;standard&#34;</span> -&gt; null
        <span style="color:#ff79c6">}</span>

      - enclave_options <span style="color:#ff79c6">{</span>
          - <span style="color:#8be9fd;font-style:italic">enabled</span> <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">false</span> -&gt; null
        <span style="color:#ff79c6">}</span>

      - maintenance_options <span style="color:#ff79c6">{</span>
          - <span style="color:#8be9fd;font-style:italic">auto_recovery</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;default&#34;</span> -&gt; null
        <span style="color:#ff79c6">}</span>

      - metadata_options <span style="color:#ff79c6">{</span>
          - <span style="color:#8be9fd;font-style:italic">http_endpoint</span>               <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;enabled&#34;</span> -&gt; null
          - <span style="color:#8be9fd;font-style:italic">http_put_response_hop_limit</span> <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span> -&gt; null
          - <span style="color:#8be9fd;font-style:italic">http_tokens</span>                 <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;optional&#34;</span> -&gt; null
          - <span style="color:#8be9fd;font-style:italic">instance_metadata_tags</span>      <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;disabled&#34;</span> -&gt; null
        <span style="color:#ff79c6">}</span>

      - root_block_device <span style="color:#ff79c6">{</span>
          - <span style="color:#8be9fd;font-style:italic">delete_on_termination</span> <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">true</span> -&gt; null
          - <span style="color:#8be9fd;font-style:italic">device_name</span>           <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;/dev/sda1&#34;</span> -&gt; null
          - <span style="color:#8be9fd;font-style:italic">encrypted</span>             <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">false</span> -&gt; null
          - <span style="color:#8be9fd;font-style:italic">iops</span>                  <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">100</span> -&gt; null
          - <span style="color:#8be9fd;font-style:italic">tags</span>                  <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">{}</span> -&gt; null
          - <span style="color:#8be9fd;font-style:italic">throughput</span>            <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span> -&gt; null
          - <span style="color:#8be9fd;font-style:italic">volume_id</span>             <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;vol-xxxxxxxx&#34;</span> -&gt; null
          - <span style="color:#8be9fd;font-style:italic">volume_size</span>           <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">8</span> -&gt; null
          - <span style="color:#8be9fd;font-style:italic">volume_type</span>           <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;gp2&#34;</span> -&gt; null
        <span style="color:#ff79c6">}</span>
    <span style="color:#ff79c6">}</span>

Plan: <span style="color:#bd93f9">0</span> to add, <span style="color:#bd93f9">0</span> to change, <span style="color:#bd93f9">1</span> to destroy.

Do you really want to destroy all resources?
  Terraform will destroy all your managed infrastructure, as shown above.
  There is no undo. Only <span style="color:#f1fa8c">&#39;yes&#39;</span> will be accepted to confirm.

  Enter a value: yes

aws_instance.app_server: Destroying... <span style="color:#ff79c6">[</span><span style="color:#8be9fd;font-style:italic">id</span><span style="color:#ff79c6">=</span>i-xxxxxxxx<span style="color:#ff79c6">]</span>
aws_instance.app_server: Still destroying... <span style="color:#ff79c6">[</span><span style="color:#8be9fd;font-style:italic">id</span><span style="color:#ff79c6">=</span>i-xxxxxxxx, 10s elapsed<span style="color:#ff79c6">]</span>
aws_instance.app_server: Still destroying... <span style="color:#ff79c6">[</span><span style="color:#8be9fd;font-style:italic">id</span><span style="color:#ff79c6">=</span>i-xxxxxxxx, 20s elapsed<span style="color:#ff79c6">]</span>
aws_instance.app_server: Still destroying... <span style="color:#ff79c6">[</span><span style="color:#8be9fd;font-style:italic">id</span><span style="color:#ff79c6">=</span>i-xxxxxxxx, 30s elapsed<span style="color:#ff79c6">]</span>
aws_instance.app_server: Destruction <span style="color:#8be9fd;font-style:italic">complete</span> after 30s

Destroy complete! Resources: <span style="color:#bd93f9">1</span> destroyed.
</code></pre></td></tr></table>
</div>
</div><p><code>- resource &quot;aws_instance&quot; &quot;app_server&quot;</code>는 리소스가 삭제된다는 의미이며, <code>terraform apply</code>와 동일하게 아래 블록에서 어떤 식으로 변경되는지 확인할 수 있다.
<code>Plan: 0 to add, 0 to change, 1 to destroy.</code>에서는 작업의 결과를 미리 확인할 수 있고, <code>Enter a value:</code>에서 <code>yes</code>를 입력하면 작업을 시작한다.
그 결과 하단에서 모든 작업이 완료되고 리소스가 삭제되었다는 문구가 나타난다.</p>
<p>AWS 콘솔에서 확인 결과 모든 인스턴스가 정상적으로 종료 된 것을 확인할 수 있다.</p>
<p><img src="/images/cloud/terraform/terraform_with_aws/terraform_with_aws_06.png" alt=""></p></section>
    <footer>
    <div class="tags">
        
        <a href="https://mingzz1.github.io//tags#AWS">#AWS</a>
        
        <a href="https://mingzz1.github.io//tags#Terraform">#Terraform</a>
        
    </div>
</footer>
</article>

<div class="comments">
    <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'mingzzis-blog';
    (function () {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
</div>

<div id="post-nav">
    <div id="previous-post" class="post-nav-post">
        
        <p>Previous post</p>
        <a href="https://mingzz1.github.io/development/cloud/2022/06/07/terraform-installation.html/">[Terraform 사용기] Terraform 설치하기</a>
        
    </div>

    <div id="next-post" class="post-nav-post">
        
    </div>
</div>


    </div>
    <ul class='social'>
    
    <li>
        <a href="https://github.com/mingzz1" class="icon alt" target="_blank">
            <i class="fa fa-github fa-2x"></i>
        </a>
    </li>
    
    <li>
        <a href="https://www.linkedin.com/in/minji-kim-12986a145/" class="icon alt" target="_blank">
            <i class="fa fa-linkedin fa-2x"></i>
        </a>
    </li>
    
</ul>
<footer class="site-footer">
    <p ckass="text">Powered by <a href="https://mingzz1.github.io" target="_blank">mingzzi</a> with <a
            href="https://skye3133.github.io/" target="_blank">myund</a></p>
</footer>

    <script id="dsq-count-scr" src="//mingzzis-blog.disqus.com/count.js" async></script>

    
<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-130304424-1']);
    _gaq.push(['_trackPageview']);
    (function () {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
    
</body>
</body>

</html>